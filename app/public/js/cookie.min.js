function getCookie(name) {
    if(! localStorage.data){
        localStorage.data = JSON.stringify({name: ""});
    }
    let data = JSON.parse(localStorage.data);
    // if (! data[name]){
    //
    //     let matches = document.cookie.match(new RegExp("(?:^|; )" + name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, '\\$1') + "=([^;]*)"));
    //    data[name] =  matches ? decodeURIComponent(matches[1]) : undefined;
    //    localStorage.data = JSON.stringify(data);
    // }
    return data[name];


    /** Это старый код с использованием кук  */
    /*
    let matches = document.cookie.match(new RegExp("(?:^|; )" + name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, '\\$1') + "=([^;]*)"));
    return matches ? decodeURIComponent(matches[1]) : undefined;

     */
}

function setCookie(name, value, options = {}) {
    if(! localStorage.data){
        localStorage.data = JSON.stringify({});
    }
    let data = JSON.parse(localStorage.data);

    data[name] = value;
    localStorage.data = JSON.stringify(data);
    return;

    /** Это старый код с использованием кук  */
    /*
    let date = new Date();
    date.setTime(date.getTime() + 60 * 60 * 24 * 365 * 10);
    date = date.toUTCString();
    options.sameSite = 'Lax';
    if (!options.path) options.path = '/';
    if (options.expires instanceof Date) {
        options.expires = options.expires.toUTCString();
    }
    let updatedCookie = encodeURIComponent(name) + "=" + encodeURIComponent(value);
    for (let optionKey in options) {
        updatedCookie += "; " + optionKey;
        let optionValue = options[optionKey];
        if (optionValue !== true) {
            updatedCookie += "=" + optionValue;
        }
    }
    document.cookie = updatedCookie;

     */
}

function deleteCookie(name, path = '/') {
    let data = JSON.parse(localStorage.data);
    delete data[name];
    localStorage.data = JSON.stringify(data);
    /** Это старый код с использованием кук  */
    /*
    setCookie(name, "", {'max-age': -1, 'path': path})

     */
}
